--SQL Group Work
-- Vehicle Table
CREATE TABLE Vehicle (
    Vehicle_ID INT PRIMARY KEY,
    Route_ID INT NOT NULL,
    Capacity INT NOT NULL,
    Type VARCHAR(50),
    FOREIGN KEY (Route_ID) REFERENCES Route(Route_ID)
);

-- Route Table
CREATE TABLE Route (
    Route_ID INT PRIMARY KEY,
    Route_name VARCHAR(100) NOT NULL,
    Start_location VARCHAR(100) NOT NULL,
    Distance DECIMAL(10, 2),
    End_location VARCHAR(100) NOT NULL
);

-- Passenger Table
CREATE TABLE Passenger (
    Passenger_ID INT PRIMARY KEY,
    Preferred_route_ID INT,
    Contact_info VARCHAR(150),
    Name VARCHAR(100),
    FOREIGN KEY (Preferred_route_ID) REFERENCES Route(Route_ID)
);

-- Schedule Table
CREATE TABLE Schedule (
    Schedule_ID INT PRIMARY KEY,
    Vehicle_ID INT NOT NULL,
    Route_ID INT NOT NULL,
    Departure_time TIMESTAMP,
    Arrival_time TIMESTAMP,
    Traffic_condition VARCHAR(100),
    FOREIGN KEY (Vehicle_ID) REFERENCES Vehicle(Vehicle_ID),
    FOREIGN KEY (Route_ID) REFERENCES Route(Route_ID)
);

-- Ticket Table
CREATE TABLE Ticket (
    Ticket_ID INT PRIMARY KEY,
    Passenger_ID INT NOT NULL,
    Schedule_ID INT NOT NULL,
    Fare DECIMAL(10, 2),
    FOREIGN KEY (Passenger_ID) REFERENCES Passenger(Passenger_ID),
    FOREIGN KEY (Schedule_ID) REFERENCES Schedule(Schedule_ID)
);

-- Maintenance Table
CREATE TABLE Maintenance (
    Maintenance_ID INT PRIMARY KEY,
    Vehicle_ID INT NOT NULL,
    Maintenance_status VARCHAR(50),
    Maintenance_date DATE,
    Issue_details VARCHAR(200),
    FOREIGN KEY (Vehicle_ID) REFERENCES Vehicle(Vehicle_ID)
);
-- Insert into Route
INSERT INTO Route (Route_ID, Route_name, Start_location, Distance, End_location)
VALUES 
(1, 'Route A', 'Downtown', 15.5, 'Uptown'),
(2, 'Route B', 'Westside', 25.3, 'Eastside');

-- Insert into Vehicle
INSERT INTO Vehicle (Vehicle_ID, Route_ID, Capacity, Type)
VALUES 
(101, 1, 50, 'Bus'),
(102, 2, 30, 'Van');

-- Insert into Passenger
INSERT INTO Passenger (Passenger_ID, Preferred_route_ID, Contact_info, Name)
VALUES 
(201, 1, 'john.doe@example.com', 'John Doe'),
(202, 2, 'jane.smith@example.com', 'Jane Smith');

-- Insert into Schedule
INSERT INTO Schedule (Schedule_ID, Vehicle_ID, Route_ID, Departure_time, Arrival_time, Traffic_condition)
VALUES 
(301, 101, 1, '2024-11-26 08:00:00', '2024-11-26 08:45:00', 'Moderate'),
(302, 102, 2, '2024-11-26 09:00:00', '2024-11-26 09:50:00', 'Heavy');

-- Insert into Ticket
INSERT INTO Ticket (Ticket_ID, Passenger_ID, Schedule_ID, Fare)
VALUES 
(401, 201, 301, 3.50),
(402, 202, 302, 4.00);

-- Insert into Maintenance
INSERT INTO Maintenance (Maintenance_ID, Vehicle_ID, Maintenance_status, Maintenance_date, Issue_details)
VALUES 
(501, 101, 'Completed', '2024-11-25', 'Oil change'),
(502, 102, 'Pending', '2024-11-28', 'Brake inspection');

SELECT Schedule_ID, Departure_time, Arrival_time, Vehicle_ID
FROM Schedule;

SELECT Passenger.Name, Ticket.Fare 
FROM Passenger
JOIN Ticket ON Passenger.Passenger_ID = Ticket.Passenger_ID
WHERE Ticket.Schedule_ID = 301;
