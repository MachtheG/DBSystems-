--SQL Statements

-- Create table Schedule
CREATE TABLE Schedule (
    Schedule_ID INT AUTO_INCREMENT PRIMARY KEY,
    Vehicle_ID INT NOT NULL,
    Route_ID INT NOT NULL,
    Departure_time DATETIME NOT NULL,
    Arrival_time DATETIME NOT NULL,
    Traffic_condition VARCHAR(50),
    FOREIGN KEY (Vehicle_ID) REFERENCES Vehicle(Vehicle_ID) ON DELETE CASCADE,
    FOREIGN KEY (Route_ID) REFERENCES Route(Route_ID) ON DELETE CASCADE
);

-- Insert into Schedule
INSERT INTO Schedule (Vehicle_ID, Route_ID, Departure_time, Arrival_time, Traffic_condition)
VALUES 
(1, 1, '2024-11-22 07:00:00', '2024-11-22 07:30:00', 'Light'),
(2, 2, '2024-11-22 08:15:00', '2024-11-22 08:45:00', 'Moderate'),
(3, 3, '2024-11-22 09:00:00', '2024-11-22 09:45:00', 'Heavy');

SELECT * FROM Schedule;

-- Creating a table for Ticket
CREATE TABLE Ticket (
    Ticket_ID INT AUTO_INCREMENT PRIMARY KEY,
    Passenger_ID INT NOT NULL,
    Schedule_ID INT NOT NULL,
    Fare DECIMAL(10, 2) NOT NULL,
    FOREIGN KEY (Passenger_ID) REFERENCES Passenger(Passenger_ID) ON DELETE CASCADE,
    FOREIGN KEY (Schedule_ID) REFERENCES Schedule(Schedule_ID) ON DELETE CASCADE
);

INSERT INTO Ticket (Passenger_ID, Schedule_ID, Fare)
VALUES 
(1, 1, 50.00),
(2, 2, 80.00),
(3, 3, 100.00);

SELECT * FROM Ticket;

-- Create table Passenger
CREATE TABLE Passenger (
    Passenger_ID INT AUTO_INCREMENT PRIMARY KEY,
    Preferred_route_ID INT NOT NULL,
    Contact_info VARCHAR(100) UNIQUE NOT NULL,
    Name VARCHAR(100) NOT NULL,
    Field VARCHAR(100),
    FOREIGN KEY (Preferred_route_ID) REFERENCES Route(Route_ID) ON DELETE CASCADE
);


-- Insert into Passenger
INSERT INTO Passenger (Preferred_route_ID, Contact_info, Name, Field)
VALUES 
(1, 'kimani.wanjiku@example.com', 'Kimani Wanjiku', 'Student'),
(2, 'njeri.mutua@example.com', 'Njeri Mutua', 'Accountant'),
(3, 'odongo.otieno@example.com', 'Odongo Otieno', 'Engineer');
SELECT * FROM Passenger;

SELECT * FROM Passenger WHERE Preferred_route_ID = 1;
SELECT * FROM Passenger;

UPDATE Passenger
SET name = 'Mungai Robert'
WHERE contact_info = 'njeri.mutua@example.com';
SELECT * FROM Passenger;

-- Insert into Route
INSERT INTO Route (Route_name, Start_location, Distance, End_location)
VALUES 
('Route 34', 'CBD', 8.5, 'Kilimani'),
('Route 45', 'CBD', 12.0, 'Eastleigh'),
('Route 125', 'CBD', 18.0, 'Karen');

-- Insert into Vehicle
INSERT INTO Vehicle (Route_ID, Capacity, Type)
VALUES 
(1, 14, 'Matatu'),
(2, 33, 'Minibus'),
(3, 50, 'Bus');
